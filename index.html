<!doctype html>
<html lang="en">
	<head>
		<title>Blackberry.js - for the artisinal web</title>
		<script type="module">
			import Alpine from "./assets/alpinejs@3.14.7.js";
			import Blackberry from "./src/blackberry.js";

			window.Alpine = Alpine;
			Alpine.plugin(Blackberry());
			Alpine.start();
		</script>
		<style>
			@import url("https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap");
			@import url("https://fonts.googleapis.com/css2?family=VT323&display=swap");

			:root {
				--blackberry-dark: #1a1b26;
				--blackberry-main: #2e3440;
				--blackberry-light: #434c5e;
				--blackberry-accent: #88c0d0;
				--blackberry-text: #d8dee9;
			}

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				background-color: var(--blackberry-dark);
				background-image: linear-gradient(
						var(--blackberry-light) 1px,
						transparent 1px
					),
					linear-gradient(
						90deg,
						var(--blackberry-light) 1px,
						transparent 1px
					);
				background-size: 20px 20px;
				background-position: -1px -1px;
				color: var(--blackberry-text);
				font-family: "VT323", monospace;
				padding: 2rem;
				position: relative;

				@media (max-width: 768px) {
					padding: 1rem;
				}
			}

			body::before {
				content: "";
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background-color: var(--blackberry-main);
				opacity: 0.7;
				pointer-events: none;
				z-index: 0;
			}

			.container {
				max-width: 1024px;
				margin: 0 auto;
				padding: 2rem;
				background-color: var(--blackberry-main);
				border: 4px solid var(--blackberry-light);
				box-shadow: 8px 8px 0 var(--blackberry-dark);
				position: relative;
				z-index: 1;

				@media (max-width: 768px) {
					padding: 1rem;
				}
			}

			h1.title,
			h2.title,
			h3.title {
				color: var(--blackberry-accent);
				margin: 2rem 0 1rem;
				text-shadow: 2px 2px 0 var(--blackberry-dark);
			}

			h1,
			h2,
			h3,
			h4,
			h5,
			h6 {
				font-family: "Press Start 2P", monospace;
			}

			h1.title {
				font-size: 2rem;
				text-align: center;
				margin-bottom: 2rem;
				@media (max-width: 550px) {
					font-size: 1.55rem;
				}
			}

			h2.title {
				font-size: 1.5rem;
				/* border-bottom: 4px solid var(--blackberry-light); */
				padding-bottom: 0.5rem;
				@media (max-width: 550px) {
					font-size: 1.25rem;
				}
			}

			h3.title {
				font-size: 1rem;
				margin-top: 2rem;
			}

			.text {
				margin: 1rem 0;
				font-family: "VT323", monospace;
				font-size: 1.65rem;
				line-height: 100%;
			}

			pre {
				background: var(--blackberry-dark) !important;
				border: 2px solid var(--blackberry-light);
				overflow-x: auto;
				font-size: 0.8rem;
			}

			.header-logo-container {
				display: flex;
				flex-direction: row;
				justify-content: center;
				align-items: center;
				margin: 2rem 0;

				@media (max-width: 768px) {
					/* hide 2 */
					& img:nth-child(2) {
						display: none;
					}
				}
			}

			.header-logo {
				display: block;
				margin: 0 auto;
				width: 100px;
				filter: drop-shadow(2px 2px 0 var(--blackberry-dark));
			}

			.feature-list {
				margin: 1rem 0;
				padding-left: 1rem;
			}

			.feature-list li {
				margin: 0.5rem 0;
				list-style: none;
				position: relative;
				padding-left: 1.5rem;
				font-size: 1.25rem;
			}

			.feature-list li::before {
				content: "â–º";
				position: absolute;
				left: 0;
				color: var(--blackberry-accent);
			}

			.note {
				background: var(--blackberry-light);
				padding: 0.5rem;
				margin: 1rem 0;
				border-left: 4px solid var(--blackberry-accent);
				font-size: 1.25rem;
				font-family: "VT323", monospace;
			}

			.text-center {
				text-align: center;
			}

			spacer-line {
				display: block;
				height: 4px;
				width: 100%;
				background: var(--blackberry-light);
			}

			spacer-berries {
				display: block;
				height: 4px;
				width: 100%;
			}
		</style>
		<link
			href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
			rel="stylesheet"
		/>
	</head>
	<body>
		<template blackberry tag="counter-component" props="initial">
			<script setup>
				$data.count = Number($props.initial ?? 0);
				$effect(() => console.log("count changed", $data.count));
				$cleanup(() => console.log("bye"));
			</script>
			<markup>
				<button @click="count++">
					count:
					<span x-text="count"></span>
				</button>
			</markup>
			<style scoped>
				button {
					background: var(--blackberry-light);
					padding: 4px 8px;
					border: 2px solid var(--blackberry-accent);
					font-family: "VT323", monospace;
					font-size: 2rem;
					color: var(--blackberry-text);
					box-shadow: 4px 4px 0 var(--blackberry-dark);
					transition: all 90ms;

					&:hover {
						transform: translateY(-2px);
						box-shadow: 6px 6px 0 var(--blackberry-dark);
					}

					&:active {
						transform: translateY(2px);
						box-shadow: 4px 4px 0 var(--blackberry-dark);
					}
				}
			</style>
		</template>

		<template blackberry tag="x-note">
			<style scoped>
				div {
					background: var(--blackberry-light);
					padding: 2px 0.5rem;
					margin: 1rem 0;
					border-left: 4px solid var(--blackberry-accent);
					font-size: 1.25rem;
					font-family: "VT323", monospace;
				}
			</style>
			<markup>
				<div>
					<p>
						ðŸ’¡ <span><slot></slot></span>
					</p>
				</div>
			</markup>
		</template>

		<template blackberry tag="inline-code">
			<style scoped>
				code {
					background: var(--blackberry-light);
					padding: 2px 0.5rem;
					margin: 1rem 0;
					background-color: var(--blackberry-accent);
					color: var(--blackberry-dark);
					border-radius: 0.25rem;
					font-size: 1.25rem;
					font-family: "VT323", monospace;
				}
			</style>
			<markup>
				<code>
					<span><slot></slot></span>
				</code>
			</markup>
		</template>

		<div class="container">
			<h1 class="title">Blackberry.js</h1>

			<div class="header-logo-container">
				<img class="header-logo" src="/assets/blackberry.png" />
				<img class="header-logo" src="/assets/blackberry.png" />
				<img class="header-logo" src="/assets/blackberry.png" />
				<img class="header-logo" src="/assets/blackberry.png" />
				<img class="header-logo" src="/assets/blackberry.png" />
			</div>

			<p class="text text-center">
				A zero-build framework for the artisanal web.
			</p>

			<spacer-line></spacer-line>

			<h2 class="title">Getting Started</h2>
			<p class="text">
				Blackberry.js lets you create reusable components using
				Alpine.js with scoped styles and a composable component model,
				without a build step or additional dependencies.
			</p>

			<pre>
        	<code class="language-html">
&lt;template blackberry tag="counter-component" props="initial"&gt;

	&lt;script setup&gt;
		$data.count = Number($props.initial ?? 0)
	 	$effect(() => console.log('count changed', $data.count))
	  	$cleanup(() => console.log("bye"))
	&lt;/script&gt;

	&lt;markup&gt;
		&lt;button @click="count++"&gt;count: &lt;span x-text="count"&gt;&lt;/span&gt;&lt;/button&gt;
	&lt;/markup&gt;

	&lt;style scoped&gt;
		button {
			background: var(--blackberry-light);
			padding: 4px 8px;
			border: 2px solid var(--blackberry-accent);
			font-family: "VT323", monospace;
			font-size: 2rem;
			color: var(--blackberry-text);
			box-shadow: 4px 4px 0 var(--blackberry-dark);
			transition: all 90ms;

			&:hover {
				transform: translateY(-2px);
				box-shadow: 6px 6px 0 var(--blackberry-dark);
			}

			&:active {
				transform: translateY(2px);
				box-shadow: 4px 4px 0 var(--blackberry-dark);
			}
		}
	&lt;/style&gt;

&lt;/template&gt;

&lt;counter-component initial="3"&gt;&lt;/counter-component&gt;
        	</code>
        </pre>

			<counter-component initial="3"></counter-component>

			<p class="text">
				Blackberry.js is inspired by
				<a href="https://strawberry.quest" target="_blank"
					>Strawberry.js</a
				>, and is designed to be used as a lightweight html-first
				alternative to frameworks like Vue and Svelte, but works without
				requiring build tooling or a complex dependency tree.
			</p>

			<h2 class="title">Setup</h2>
			<p class="text">
				The ideal way of using Blackberry.js is by copying the source
				code into your project directory. You can either use the source
				code, minified source, or a version that is bundled with
				alpine.js and automatically initalizes both.
			</p>
			<pre>
				<code class="language-html">
Import and initalize Alpine.js and Blackberry.js:

&lt;script type="module"&gt;
	import Alpine from "/alpine.js";
	import Blackberry from "/blackberry@0.1.0.min.js";

	window.Alpine = Alpine;
	Alpine.plugin(Blackberry());
	Alpine.start();
&lt;/script&gt;

Or you can automatically initialize Blackberry.js & Alpine.js:

&lt;script type="module" src="/blackberry@0.1.0.bundle.js"&gt;
				</code>
			</pre>

			<h2 class="title">Guide</h2>

			<p class="text">
				Components can be created anywhere inside of a document body,
				using a template tag with a 'blackberry' attribute. The tagname
				of the component is defined by the 'tag' attribute, and a list
				of attribute names can be provided.
			</p>

			<pre>
				<code class="language-html">
&lt;template blackberry tag="my-first-component" props="foo, bar"&gt;&lt;/template&gt;
				</code>
			</pre>

			<p class="text">
				Inside of the template tag, you can define a script tag with the
				'setup' attribute, which is used to define reactive data, props,
				effects, cleanup, event handlers, etc. Any value attached to the
				$data object will be available to the template, along with
				values in $props. Both of these objects are reactive, and values
				set on $data are made reactive. You can define cleanup functions
				with the $cleanup function, which are executed when the
				component is destroyed.
			</p>
			<pre>
				<code class="language-html">
&lt;template blackberry tag="my-first-component" props="count, text"&gt;
	&lt;script setup&gt;
		$data.count = Number($props.count ?? "0"); // reactive
		$cleanup(() => console.log("bye")); // called on destroy
	&lt;script&gt;
	&lt;markup&gt;
		&lt;p x-text="props.text"&gt;&lt;p&gt;
		&lt;p>the count is &lt;span x-text="count"&gt;&lt;span&gt;&lt;p&gt;
	&lt;markup&gt;
&lt;template&gt;
				</code>
			</pre>

			<x-note>
				You can create derived values by using a function. Eg.
				<inline-code>
					$data.double = () => $props.count * 2
				</inline-code>
			</x-note>

			<p class="text">
				Styles can be defined in a style tag with the scoped attribute.
				Styles defined here are scoped to the component and will not
				leak out to the document, so you can use simpler selectors
				without worring about specificity. Ids and classes defined in
				the component will be unique to the component.
			</p>
			<pre><code class="language-html">
&lt;template blackberry tag="my-first-component" props="count, text"&gt;
&lt;script setup&gt;
	$data.count = Number($props.count ?? "0"); // reactive
	$cleanup(() => console.log("bye")); // called on destroy
&lt;script&gt;
&lt;markup&gt;
	&lt;p x-text="props.text"&gt;&lt;p&gt;
	&lt;p>the count is &lt;span id="count-value" x-text="count"&gt;&lt;span&gt;&lt;p&gt;
&lt;markup&gt;
&lt;style scoped&gt;
	p {
		color: red;
	}

	#count-value {
		font-weight: bold;
	}
&lt;style&gt;
&lt;template&gt;
			</code>
		</pre>
		</div>

		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"
		>
			<script>
					<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js">
		</script>
	</body>
</html>
